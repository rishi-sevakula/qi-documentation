"use strict";(globalThis.webpackChunkdocumentation=globalThis.webpackChunkdocumentation||[]).push([[676],{1081(e,n,s){s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>r,default:()=>u,frontMatter:()=>l,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"build/nodes/agent","title":"Agent Node","description":"Run a tool-enabled agent with multi-step reasoning.","source":"@site/docs/build/nodes/agent.md","sourceDirName":"build/nodes","slug":"/build/nodes/agent","permalink":"/build/nodes/agent","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Agent Node","description":"Run a tool-enabled agent with multi-step reasoning."},"sidebar":"guideSidebar","previous":{"title":"LLM Node","permalink":"/build/nodes/llm"},"next":{"title":"Tool Node","permalink":"/build/nodes/tool"}}');var i=s(4848),o=s(8453);const l={title:"Agent Node",description:"Run a tool-enabled agent with multi-step reasoning."},r=void 0,d={},c=[{value:"Purpose",id:"purpose",level:2},{value:"When to use",id:"when-to-use",level:2},{value:"Configuration",id:"configuration",level:2},{value:"Core fields",id:"core-fields",level:3},{value:"Embedded tools",id:"embedded-tools",level:3},{value:"Outputs",id:"outputs",level:2},{value:"Example",id:"example",level:2},{value:"Things to keep in mind",id:"things-to-keep-in-mind",level:2}];function a(e){const n={code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.p,{children:"The Agent node runs an autonomous agent that can call tools and iterate until it produces a final answer."}),"\n",(0,i.jsx)(n.h2,{id:"purpose",children:"Purpose"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Multi-step reasoning (ReAct) with tool calling."}),"\n",(0,i.jsx)(n.li,{children:"Structured output when you need a strict response schema."}),"\n",(0,i.jsx)(n.li,{children:"Conversation management with per-agent threads."}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"when-to-use",children:"When to use"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"You need the model to decide which tools to call."}),"\n",(0,i.jsx)(n.li,{children:"The task is ambiguous and requires multiple steps."}),"\n",(0,i.jsx)(n.li,{children:"You need tool execution history captured in outputs."}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"configuration",children:"Configuration"}),"\n",(0,i.jsx)(n.h3,{id:"core-fields",children:"Core fields"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"agentStrategy"}),": ",(0,i.jsx)(n.code,{children:"react"})," or ",(0,i.jsx)(n.code,{children:"function_calling"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"model"}),": same structure as the LLM node"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"promptTemplate"}),": array of messages (system/user/assistant/tool)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"tools"}),": list of embedded tool definitions"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"maxIterations"}),": max tool/LLM steps (1-20)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"includeThoughts"}),": include reasoning in output (if supported)"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"embedded-tools",children:"Embedded tools"}),"\n",(0,i.jsxs)(n.p,{children:["Each tool in ",(0,i.jsx)(n.code,{children:"tools"})," includes:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"name"}),", ",(0,i.jsx)(n.code,{children:"description"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"config.type"}),": ",(0,i.jsx)(n.code,{children:"mcp | api | code | custom | handoff"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"config.settings"}),": provider settings (e.g., MCP server id)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"config.parameters"}),": input parameters (auto or static)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"config.schema"}),": JSON schema for tool parameters"]}),"\n",(0,i.jsxs)(n.li,{children:["Output controls:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"captureRawResponse"}),": stores raw tool output in state"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"llmProjection"}),": filters which fields the LLM can see"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"returnDirect"}),": interrupts the workflow and returns tool output directly"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"outputs",children:"Outputs"}),"\n",(0,i.jsx)(n.p,{children:"Agent nodes emit a fixed payload:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"text"}),": final response"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"structuredOutput"}),": when enabled"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"toolCalls"}),": list of tool invocations"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"toolResults"}),": captured raw tool outputs (when enabled)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"threadUpdate"}),": persisted into ",(0,i.jsx)(n.code,{children:"thread.<agentId>_messages"})]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"example",children:"Example"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "type": "agent",\n  "config": {\n    "agentStrategy": "react",\n    "model": { "provider": "openai", "code": "gpt-4.1" },\n    "promptTemplate": [\n      { "id": "sys-1", "role": "system", "text": "You are a support agent." },\n      { "id": "usr-1", "role": "user", "text": "{{system.userQuery}}" }\n    ],\n    "tools": [\n      {\n        "name": "search_kb",\n        "description": "Search internal knowledge base",\n        "config": {\n          "type": "mcp",\n          "settings": { "serverId": "kb-server" },\n          "schema": {\n            "type": "object",\n            "properties": { "query": { "type": "string" } },\n            "required": ["query"]\n          },\n          "parameters": {\n            "query": { "auto": true, "value": { "type": "string", "value": "" } }\n          },\n          "captureRawResponse": true\n        }\n      }\n    ],\n    "maxIterations": 5\n  }\n}\n'})}),"\n",(0,i.jsx)(n.h2,{id:"things-to-keep-in-mind",children:"Things to keep in mind"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["The agent keeps its own thread at ",(0,i.jsx)(n.code,{children:"thread.<agentId>_messages"}),". System prompts are not stored in the thread."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"returnDirect: true"})," tools trigger a workflow interrupt and return tool output as the response."]}),"\n",(0,i.jsxs)(n.li,{children:["Keep ",(0,i.jsx)(n.code,{children:"maxIterations"})," low to avoid runaway loops."]}),"\n",(0,i.jsx)(n.li,{children:"Tools must be validated; invalid schemas or missing settings cause runtime failures."}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(a,{...e})}):a(e)}},8453(e,n,s){s.d(n,{R:()=>l,x:()=>r});var t=s(6540);const i={},o=t.createContext(i);function l(e){const n=t.useContext(o);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),t.createElement(o.Provider,{value:n},e.children)}}}]);