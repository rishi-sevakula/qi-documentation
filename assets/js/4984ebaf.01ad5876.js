"use strict";(globalThis.webpackChunkdocumentation=globalThis.webpackChunkdocumentation||[]).push([[3242],{4415(e,n,i){i.r(n),i.d(n,{assets:()=>o,contentTitle:()=>l,default:()=>u,frontMatter:()=>d,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"build/nodes/guardrail","title":"Guardrail Node","description":"Validate or sanitize content using guardrail checks.","source":"@site/docs/build/nodes/guardrail.md","sourceDirName":"build/nodes","slug":"/build/nodes/guardrail","permalink":"/build/nodes/guardrail","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Guardrail Node","description":"Validate or sanitize content using guardrail checks."},"sidebar":"guideSidebar","previous":{"title":"HTTP Request Node","permalink":"/build/nodes/api"},"next":{"title":"Rule Node","permalink":"/build/nodes/rule"}}');var r=i(4848),t=i(8453);const d={title:"Guardrail Node",description:"Validate or sanitize content using guardrail checks."},l=void 0,o={},a=[{value:"Purpose",id:"purpose",level:2},{value:"Configuration",id:"configuration",level:2},{value:"Outputs",id:"outputs",level:2},{value:"Routing",id:"routing",level:2},{value:"Things to keep in mind",id:"things-to-keep-in-mind",level:2}];function c(e){const n={code:"code",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.p,{children:"The Guardrail node runs safety or compliance checks on inputs or outputs. It can flag or sanitize content before downstream nodes consume it."}),"\n",(0,r.jsx)(n.h2,{id:"purpose",children:"Purpose"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Run PII, jailbreak, or custom prompt checks."}),"\n",(0,r.jsx)(n.li,{children:"Optionally sanitize input text and write it back to state."}),"\n",(0,r.jsx)(n.li,{children:"Route to pass/fail branches."}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"configuration",children:"Configuration"}),"\n",(0,r.jsx)(n.p,{children:"Key fields:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"input"}),": string template (e.g., ",(0,r.jsx)(n.code,{children:"{{flow.userMessage}}"}),")"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"checks"}),": list of checks with ",(0,r.jsx)(n.code,{children:"name"}),", ",(0,r.jsx)(n.code,{children:"stage"}),", and ",(0,r.jsx)(n.code,{children:"params"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"decision.mode"}),": currently ",(0,r.jsx)(n.code,{children:"all_must_pass"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"model"}),": used for LLM-based checks (credentials injected at runtime)"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "type": "guardrail",\n  "config": {\n    "input": "{{flow.userMessage}}",\n    "checks": [\n      {\n        "name": "PII",\n        "stage": "input",\n        "params": { "action": "mask" }\n      },\n      {\n        "name": "Jailbreak",\n        "stage": "input",\n        "params": {\n          "model": { "code": "gpt-4.1", "provider": "openai" }\n        }\n      }\n    ],\n    "decision": { "mode": "all_must_pass" }\n  }\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"outputs",children:"Outputs"}),"\n",(0,r.jsx)(n.p,{children:"The node emits:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"passed"}),": boolean"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"sanitizedInput"}),": string (when a check rewrites input)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"findings"}),": list of violations"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"rawGuardrailResults"}),": raw check responses"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"routing",children:"Routing"}),"\n",(0,r.jsxs)(n.p,{children:["Guardrail nodes are typically connected with ",(0,r.jsx)(n.code,{children:"PASS"})," and ",(0,r.jsx)(n.code,{children:"FAIL"})," handles."]}),"\n",(0,r.jsx)(n.h2,{id:"things-to-keep-in-mind",children:"Things to keep in mind"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["LLM-based checks (e.g., CustomPrompt, Jailbreak) require a model in ",(0,r.jsx)(n.code,{children:"params.model"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["If ",(0,r.jsx)(n.code,{children:"sanitizedInput"})," is returned, the node overwrites the input variable it read from."]}),"\n",(0,r.jsx)(n.li,{children:"Guardrails require valid credentials injected at runtime, similar to LLM nodes."}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},8453(e,n,i){i.d(n,{R:()=>d,x:()=>l});var s=i(6540);const r={},t=s.createContext(r);function d(e){const n=s.useContext(t);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:d(e.components),s.createElement(t.Provider,{value:n},e.children)}}}]);