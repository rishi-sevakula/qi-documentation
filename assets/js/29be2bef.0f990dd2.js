"use strict";(globalThis.webpackChunkdocumentation=globalThis.webpackChunkdocumentation||[]).push([[118],{1185(e,n,i){i.r(n),i.d(n,{assets:()=>r,contentTitle:()=>t,default:()=>a,frontMatter:()=>d,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"build/nodes/rule","title":"Rule Node","description":"Route execution based on conditional logic.","source":"@site/docs/build/nodes/rule.md","sourceDirName":"build/nodes","slug":"/build/nodes/rule","permalink":"/qi-documentation/build/nodes/rule","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Rule Node","description":"Route execution based on conditional logic."},"sidebar":"guideSidebar","previous":{"title":"Guardrail Node","permalink":"/qi-documentation/build/nodes/guardrail"},"next":{"title":"Variable Node","permalink":"/qi-documentation/build/nodes/variable"}}');var o=i(4848),l=i(8453);const d={title:"Rule Node",description:"Route execution based on conditional logic."},t=void 0,r={},c=[{value:"Purpose",id:"purpose",level:2},{value:"Configuration",id:"configuration",level:2},{value:"Operators",id:"operators",level:3},{value:"Outputs",id:"outputs",level:2},{value:"Routing",id:"routing",level:2},{value:"Things to keep in mind",id:"things-to-keep-in-mind",level:2}];function u(e){const n={code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,l.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.p,{children:"The Rule node evaluates conditions and routes execution to the first matching rule."}),"\n",(0,o.jsx)(n.h2,{id:"purpose",children:"Purpose"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Express conditional logic without code."}),"\n",(0,o.jsx)(n.li,{children:"Route to different branches based on state."}),"\n",(0,o.jsx)(n.li,{children:"Provide a default fallback route."}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"configuration",children:"Configuration"}),"\n",(0,o.jsx)(n.p,{children:"Rules are evaluated in order. The first rule that matches wins."}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-json",children:'{\n  "type": "rule",\n  "config": {\n    "rules": [\n      {\n        "ruleId": "r-high-priority",\n        "enable": true,\n        "logicType": "AND",\n        "conditions": [\n          { "field": "{{flow.priority}}", "operator": ">=", "value": 8 },\n          { "field": "{{flow.status}}", "operator": "is", "value": "open" }\n        ]\n      },\n      {\n        "ruleId": "r-default",\n        "enable": true,\n        "logicType": "default",\n        "conditions": []\n      }\n    ]\n  }\n}\n'})}),"\n",(0,o.jsx)(n.h3,{id:"operators",children:"Operators"}),"\n",(0,o.jsx)(n.p,{children:"Supported operators include:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["String: ",(0,o.jsx)(n.code,{children:"contains"}),", ",(0,o.jsx)(n.code,{children:"not contains"}),", ",(0,o.jsx)(n.code,{children:"is"}),", ",(0,o.jsx)(n.code,{children:"is not"}),", ",(0,o.jsx)(n.code,{children:"starts with"}),", ",(0,o.jsx)(n.code,{children:"ends with"}),", ",(0,o.jsx)(n.code,{children:"is empty"}),", ",(0,o.jsx)(n.code,{children:"is not empty"})]}),"\n",(0,o.jsxs)(n.li,{children:["Number: ",(0,o.jsx)(n.code,{children:"="}),", ",(0,o.jsx)(n.code,{children:"!="}),", ",(0,o.jsx)(n.code,{children:"<"}),", ",(0,o.jsx)(n.code,{children:">"}),", ",(0,o.jsx)(n.code,{children:"<="}),", ",(0,o.jsx)(n.code,{children:">="}),", ",(0,o.jsx)(n.code,{children:"is empty"}),", ",(0,o.jsx)(n.code,{children:"is not empty"})]}),"\n",(0,o.jsxs)(n.li,{children:["Array: ",(0,o.jsx)(n.code,{children:"contains"}),", ",(0,o.jsx)(n.code,{children:"not contains"}),", ",(0,o.jsx)(n.code,{children:"is empty"}),", ",(0,o.jsx)(n.code,{children:"is not empty"}),", ",(0,o.jsx)(n.code,{children:"starts with"}),", ",(0,o.jsx)(n.code,{children:"ends with"})]}),"\n",(0,o.jsxs)(n.li,{children:["Object: ",(0,o.jsx)(n.code,{children:"is empty"}),", ",(0,o.jsx)(n.code,{children:"is not empty"})]}),"\n",(0,o.jsxs)(n.li,{children:["Boolean: ",(0,o.jsx)(n.code,{children:"is"}),", ",(0,o.jsx)(n.code,{children:"is not"}),", ",(0,o.jsx)(n.code,{children:"="}),", ",(0,o.jsx)(n.code,{children:"!="})]}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"outputs",children:"Outputs"}),"\n",(0,o.jsx)(n.p,{children:"The Rule node emits:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"matchedRule"}),": rule id (or ",(0,o.jsx)(n.code,{children:"r-else"}),")"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"ruleResult"}),": boolean"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"evaluationDetails"}),": optional diagnostics"]}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"routing",children:"Routing"}),"\n",(0,o.jsx)(n.p,{children:"Edges should use the rule id in their source handle:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"sourceHandle = ruleId"})," for matched rules"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"sourceHandle = r-else"})," for the default path"]}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"things-to-keep-in-mind",children:"Things to keep in mind"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Rule order matters. Place the most specific rules first."}),"\n",(0,o.jsxs)(n.li,{children:["Use explicit namespaces (",(0,o.jsx)(n.code,{children:"flow.*"}),", ",(0,o.jsx)(n.code,{children:"system.*"}),", ",(0,o.jsx)(n.code,{children:"nodes.*"}),") to avoid ambiguity."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"logicType: default"})," should be the last rule."]}),"\n"]})]})}function a(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(u,{...e})}):u(e)}},8453(e,n,i){i.d(n,{R:()=>d,x:()=>t});var s=i(6540);const o={},l=s.createContext(o);function d(e){const n=s.useContext(l);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:d(e.components),s.createElement(l.Provider,{value:n},e.children)}}}]);